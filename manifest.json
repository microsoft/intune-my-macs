{
  "metadata": {
    "title": "Intune macOS Policies, Packages, and Scripts",
    "description": "Collection of Microsoft Intune configuration policies for macOS device management, plus install scripts for Company Portal, Microsoft 365 Apps, Microsoft Edge, and Windows App.",
    "version": "1.0",
    "lastUpdated": "2025-08-08"
  },
  "policies": [
    {
      "type": "Policy",
      "name": "IMM - Platform SSO",
      "description": "Configures Platform Single Sign-On (SSO) for Microsoft Entra ID authentication on macOS devices, enabling seamless authentication across Microsoft services and applications.",
      "platform": "macOS",
      "category": "Identity",
      "filePath": "configurations/entra/entra-psso.json",
      "settingCount": 15
    },
    {
      "type": "Policy",
      "name": "IMM - Passcode (DDM)",
      "description": "Enforces passcode requirements for macOS devices including minimum length, complexity, failed attempt limits, and expiration policies to ensure device security compliance.",
      "platform": "macOS",
      "category": "Security",
      "filePath": "configurations/intune/ddm-passcode.json",
      "settingCount": 12
    },
    {
      "type": "Policy",
      "name": "IMM - FileVault Setup",
      "description": "Configures FileVault disk encryption on macOS devices during Setup Assistant with recovery key escrow to Microsoft Endpoint Manager for enterprise data protection.",
      "platform": "macOS",
      "category": "Security",
      "filePath": "configurations/intune/filevault.json",
      "settingCount": 12
    },
    {
      "type": "Package",
      "name": "IMM - Onboarding Splashscreen",
      "description": "Installs the Swift Dialog onboarding splash screen used during first-run onboarding and auto installs Office, Edge, Windows App.",
      "platform": "macOS",
      "category": "Config",
      "filePath": "onboarding/IMM-Swift Dialog Onboarding.pkg",
      "preinstallscript": "",
      "postInstallScript": "",
      "primaryBundleId": "com.microsoft.onboarding",
      "primaryBundleVersion": "1.0",
      "publisher": "Microsoft",
      "minimumSupportedOperatingSystem": "v10_13",
      "ignoreVersionDetection": "true"
    },
    {
      "type": "Script",
      "name": "IMM - Install Company Portal",
      "description": "Downloads and installs Microsoft Company Portal via signed PKG; ensures MAU and Rosetta where needed; updates Octory and logs to /Library/Logs/Microsoft/IntuneScripts/installCompanyPortal.",
      "platform": "macOS",
      "category": "Config",
      "filePath": "scripts/intune/install-company-portal.zsh",
      "requiresElevation": true,
      "runAsAccount": "system",
      "blockExecutionNotifications": true,
      "executionFrequency": "PT0S",
      "retryCount": 3
    },
    {
      "type": "Script",
      "name": "IMM - Device Rename",
      "description": "Renames the Mac based on country code and serial number; sets ComputerName, HostName, and LocalHostName with logging.",
      "platform": "macOS",
      "category": "Config",
      "filePath": "scripts/intune/device-rename.sh",
      "requiresElevation": true,
      "runAsAccount": "system",
      "blockExecutionNotifications": true,
      "executionFrequency": "PT0S",
      "retryCount": 3
    },
    {
      "type": "Script",
      "name": "IMM - Configure Dock",
      "description": "Waits for app installs then configures the macOS Dock items; supports swiftDialog status updates and optional dockutil.",
      "platform": "macOS",
      "category": "Config",
      "filePath": "scripts/intune/configure-dock.sh",
      "requiresElevation": true,
      "runAsAccount": "system",
      "blockExecutionNotifications": true,
      "executionFrequency": "PT0S",
      "retryCount": 3
    },
    {
      "type": "Script",
      "name": "IMM - Install Escrow Buddy",
      "description": "Downloads and installs the latest Escrow Buddy; checks FileVault status and authorization, and remediates missing escrow where needed.",
      "platform": "macOS",
      "category": "Security",
      "filePath": "scripts/intune/install-escrow-buddy.sh",
      "requiresElevation": true,
      "runAsAccount": "system",
      "blockExecutionNotifications": true,
      "executionFrequency": "PT0S",
      "retryCount": 3
    }
  ]
}
